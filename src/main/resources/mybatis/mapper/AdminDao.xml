<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.port.springboot.dao.IAdminDao"> 

	<select id="userList" resultType="com.port.springboot.dto.UserDto">
		select * from tb_user order by user_no desc
	</select>
	
	<delete id="userDelete" parameterType="com.port.springboot.dto.UserDto">
		delete from tb_user where user_id = #{user_id}
	</delete>
	
	<select id="orderList" resultType="com.port.springboot.dto.OrderDto">
		select o.order_no, o.order_date, u.user_id, i.item_name, o.order_state 
		from tb_order o, tb_item i, tb_user u 
		where o.user_no = u.user_no  and o.item_no = i.item_no
		order by o.order_no desc
	</select>
	
	<insert id="itemAdd" parameterType="com.port.springboot.dto.ItemDto">
		INSERT INTO tb_item(item_no, item_type, item_name, item_price, item_stock, item_img, item_info_img) 
		values (tb_item_seq.nextval, #{item_type}, #{item_name}, #{item_price}, #{item_stock}, #{item_img}, #{item_info_img})
	</insert>
	
	<select id="itemList" resultType="com.port.springboot.dto.ItemDto">
		select * from tb_item
	</select>
	
	<select id="itemQna" resultType="com.port.springboot.dto.QnaDto">
		select i.item_no, b.board_name, b.board_writer, b.board_write_date 
		from tb_item i, tb_board b
		where i.item_no = b.item_no
		<!-- select i.item_nm, q.board_nm, q.writer, TO_CHAR(q.write_date,'YYYYMMDD'), q.board_no from tb_item i, tb_board q where i.item_id = q.item_id -->
	</select>
	
	<delete id="itemDelete" parameterType="com.port.springboot.dto.ItemDto">
		delete from tb_item where item_no = #{item_no}
	</delete>
	
	<update id="orderStateChange" parameterType="com.port.springboot.dto.OrderDto">
		update tb_order set order_state = #{order_state} where order_no = #{order_no}
	</update>

</mapper>